<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>DukesFxApp.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">rc-server</a> &gt; <a href="../index.html" class="el_bundle">rc-app</a> &gt; <a href="index.source.html" class="el_package">org.rcdukes.app</a> &gt; <span class="el_source">DukesFxApp.java</span></div><h1>DukesFxApp.java</h1><pre class="source lang-java linenums">package org.rcdukes.app;

import java.net.URL;

import org.kohsuke.args4j.CmdLineException;
import org.kohsuke.args4j.CmdLineParser;
import org.kohsuke.args4j.Option;
import org.rcdukes.opencv.NativeLibrary;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

/**
 * Java FX based GUI
 * 
 * @author wf
 *
 */
<span class="nc" id="L22">public class DukesFxApp extends Application {</span>

  private static String[] cmdLineArgs;
  private CmdLineParser parser;
<span class="nc" id="L26">  @Option(name = &quot;-d&quot;, aliases = {</span>
      &quot;--debug&quot; }, usage = &quot;debug\ncreate additional debug output if this switch is used&quot;)
  protected boolean debug = false;

<span class="nc" id="L30">  @Option(name = &quot;-a&quot;, aliases = {</span>
      &quot;--autostart&quot; }, usage = &quot;autostart using the configuration&quot;)
  protected boolean autostart=false;
  
<span class="nc" id="L34">  @Option(name = &quot;-iw&quot;, aliases = {</span>
  &quot;--imageWidth&quot; }, usage = &quot;camera imageWidth&quot;)
  protected int imageWidth=800;
  
<span class="nc" id="L38">  @Option(name = &quot;-s&quot;, aliases = {</span>
  &quot;--simulator&quot; }, usage = &quot;configure simulator&quot;)
  protected boolean simulator=false;

  /**
   * get the resource from the given path
   * 
   * @param path
   *          - relative to src/main/resource in the target classpath
   * @return - the URL for the resource
   */
  public URL getResource(String path) {
<span class="nc" id="L50">    return getClass().getClassLoader().getResource(path);</span>
  }

  @Override
  public void start(Stage primaryStage) throws Exception {
<span class="nc" id="L55">    this.parseArguments();</span>
    // see
    // https://stackoverflow.com/questions/39164050/javafx-8-tabpanes-and-tabs-with-separate-fxml-and-controllers-for-each-tab
<span class="nc" id="L58">    FXMLLoader loader = new FXMLLoader(getResource(&quot;fx/dukes.fxml&quot;));</span>
<span class="nc" id="L59">    VBox root = loader.load();</span>
<span class="nc" id="L60">    Scene scene = new Scene(root, BaseGUI.getScreenWidth() * 3 / 4,</span>
<span class="nc" id="L61">        BaseGUI.getScreenHeight() * 3 / 4);</span>
<span class="nc" id="L62">    String css = getResource(&quot;fx/dukes.css&quot;).toExternalForm();</span>
<span class="nc" id="L63">    scene.getStylesheets().add(css);</span>
<span class="nc" id="L64">    DukesFxGUI gui = loader.getController();</span>
<span class="nc" id="L65">    gui.init(primaryStage);</span>
<span class="nc" id="L66">    primaryStage.setTitle(&quot;RC-Dukes Self driving Car&quot;);</span>
<span class="nc" id="L67">    primaryStage.setScene(scene);</span>
<span class="nc" id="L68">    primaryStage.setMaximized(true);</span>
<span class="nc" id="L69">    primaryStage.widthProperty().addListener((obs, oldVal, newVal) -&gt; {</span>
<span class="nc" id="L70">      gui.addJustFullScreenButton();</span>
<span class="nc" id="L71">    });</span>
<span class="nc" id="L72">    primaryStage.show();</span>
<span class="nc" id="L73">    gui.setDebug(debug);</span>
<span class="nc" id="L74">    gui.setCameraImageWidth(imageWidth);</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">    if (autostart) {</span>
<span class="nc" id="L76">      gui.autoStart(simulator);</span>
    }
<span class="nc" id="L78">  }</span>

  /**
   * parse the command line arguments
   * 
   * @param args
   * @throws CmdLineException
   */
  public void parseArguments() throws CmdLineException {
<span class="nc" id="L87">    parser = new CmdLineParser(this);</span>
<span class="nc" id="L88">    parser.parseArgument(cmdLineArgs);</span>
<span class="nc" id="L89">  }</span>

  /**
   * run the app
   * 
   * @param args
   * @throws Exception
   */
  public static void main(String... args) throws Exception {
<span class="nc" id="L98">    cmdLineArgs = args;</span>
<span class="nc" id="L99">    NativeLibrary.load();</span>
<span class="nc" id="L100">    launch(args);</span>
<span class="nc" id="L101">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>